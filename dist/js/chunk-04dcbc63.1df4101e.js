(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04dcbc63"],{"2e40":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roleitem"},[a("el-form-item",{attrs:{label:"权限",prop:"type"}},[a("el-checkbox-group",{on:{change:e.setReturnVal},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[e._l(e.roles,function(e){return a("el-checkbox",{key:e.key,attrs:{value:e.id,label:e.value,name:"type"}})}),a("el-checkbox",{attrs:{label:"管理员",name:"type"}}),a("el-checkbox",{attrs:{label:"人员管理",name:"type"}}),a("el-checkbox",{attrs:{label:"权限管理",name:"type"}}),a("el-checkbox",{attrs:{label:"菜单管理",name:"type"}})],2)],1)],1)},r=[],l=a("08ae"),i=a("594e"),o={name:"roleitem",props:{param:""},data:function(){return{role:[],roles:[]}},created:function(){var e=this;this.param&&(this.role=JSON.parse(this.param)),i["a"].get(l["a"].server+"/api/bind/getlist").then(function(t){e.roles=t.d})},methods:{setReturnVal:function(){var e="";0!==this.role.length&&(e=JSON.stringify(this.role)),this.$emit("setRole",e)}},watch:{param:function(e){e&&(this.role=JSON.parse(e))}}},n=o,u=a("2877"),c=Object(u["a"])(n,s,r,!1,null,null,null);c.options.__file="RoleItem.vue";t["a"]=c.exports},"6c6f":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addressitem"},[a("el-form-item",{attrs:{label:"区域",prop:"address"}},[a("el-select",{attrs:{placeholder:"请选择区域",clearable:""},on:{change:e.setReturnVal},model:{value:e.param,callback:function(t){e.param=t},expression:"param"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.citys,function(e){return a("el-option",{key:e.key,attrs:{value:e.key,label:e.text}})}),a("el-option",{attrs:{label:"成都市",value:"chengdu"}}),a("el-option",{attrs:{label:"郫县",value:"pixian"}})],2)],1)],1)},r=[],l=a("08ae"),i=a("594e"),o={name:"addressitem",props:{param:""},data:function(){return{citys:[]}},created:function(){var e=this;i["a"].get(l["a"].server+"/api/bind/getlist").then(function(t){e.citys=t.d})},methods:{setReturnVal:function(){this.$emit("setAddress",this.param)}},watch:{param:function(e){this.address=e}}},n=o,u=a("2877"),c=Object(u["a"])(n,s,r,!1,null,null,null);c.options.__file="AddressItem.vue";t["a"]=c.exports},"7f7f":function(e,t,a){var s=a("86cc").f,r=Function.prototype,l=/^\s*function ([^ (]*)/,i="name";i in r||a("9e1e")&&s(r,i,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(e){return""}}})},8819:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"useredit"},[e._m(0),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{attrs:{type:"number",size:"small"},model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",e._n(t))},expression:"ruleForm.age"}})],1),e.hackReset?a("addressitem",{attrs:{param:e.ruleForm.address},on:{setAddress:e.setAddress}}):e._e(),a("el-form-item",{attrs:{label:"创建时间",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"createDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",size:"small"},model:{value:e.ruleForm.createDate,callback:function(t){e.$set(e.ruleForm,"createDate",t)},expression:"ruleForm.createDate"}})],1)],1)],1),a("el-form-item",{attrs:{label:"是否有效",prop:"status"}},[a("el-switch",{model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}})],1),e.hackReset?a("roleitem",{attrs:{param:e.ruleForm.type},on:{role_val:e.setRole}}):e._e(),a("el-form-item",{attrs:{label:"单选"}},[a("el-radio-group",{model:{value:e.ruleForm.radioVal,callback:function(t){e.$set(e.ruleForm,"radioVal",t)},expression:"ruleForm.radioVal"}},e._l(e.allList,function(e){return a("el-radio",{key:e.key,attrs:{value:e.key,label:e.text}})}))],1),a("el-form-item",{attrs:{label:"多个选择"}},[a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"可搜索选择"},model:{value:e.selectMultiple,callback:function(t){e.selectMultiple=t},expression:"selectMultiple"}},e._l(e.allList,function(e){return a("el-option",{key:e.key,attrs:{label:e.text,value:e.key}})}))],1),a("el-form-item",[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户管理",name:"first"}},[e._v("\n          用户基本信息\n        ")]),a("el-tab-pane",{attrs:{label:"配置管理",name:"second"}},[e._v("\n          配置基本信息\n        ")]),a("el-tab-pane",{attrs:{label:"角色管理",name:"third"}},[e._v("\n          角色基本信息\n          ")])],1)],1),a("el-form-item",[a("el-cascader",{attrs:{placeholder:"可搜索",options:e.options,filterable:""},model:{value:e.searchRegions,callback:function(t){e.searchRegions=t},expression:"searchRegions"}})],1),a("fileuploaditem",{attrs:{param:e.ruleForm.uploadFile,isAuto:!1,multiple:!0,suffix:e.uploadImage,type:"file",size:e.fileSize},on:{setFileUpload:e.setFileUpload}})],1),a("div",{staticClass:"operation"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmitForm("ruleForm")}}},[e._v("提交")]),a("el-button",{attrs:{type:"info"},on:{click:e.onCancel}},[e._v("取消")])],1)],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[a("span",{staticClass:"title-name"},[e._v("用户操作")])])])}],l=a("08ae"),i=a("594e"),o=a("41cb"),n=a("6c6f"),u=a("2e40"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form-item",{attrs:{label:"附件上传",prop:"uploadfile"}},[a("el-upload",{ref:"uploadfile",staticClass:"upload-demo",attrs:{"http-request":e.onUploadSectionFile,"before-upload":e.onBeforeAvatarUpload,"before-remove":e.onBeforeRemove,accept:e.suffix,"file-list":e.fileList,"auto-upload":e.isAuto,multiple:e.multiple,"on-success":e.onSuccess,"on-preview":e.onPreview}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e.isauto?e._e():a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.onSubmitUpload}},[e._v("上传到服务器")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)},m=[],p=(a("7f7f"),{name:"fileupload",props:{param:"",isAuto:{default:!0},type:{type:String,default:""},suffix:{type:String,default:""},size:{default:30},multiple:{default:!0}},data:function(){return{fileList:[],fileWriteList:[]}},created:function(){this.param&&(this.fileWriteList=JSON.parse(this.param),this.onSuccess(this.fileWriteList))},methods:{setReturnVal:function(){var e="";0!==this.fileWriteList.length&&(e=JSON.stringify(this.fileWriteList)),this.$emit("setFileUpload",e)},onSuccess:function(e){this.fileList=e,this.setReturnVal()},onSubmitUpload:function(){this.$refs.uploadfile.submit()},onBeforeAvatarUpload:function(e){var t=e.name.substring(e.name.indexOf(".")),a=this.suffix.indexOf(t)>0,s=e.size/1024/1024<this.size;return a||this.$message({showClose:!0,message:"上传格式只能为"+this.uploadsuffix+"格式!",type:"error"}),s||this.$message({showClose:!0,message:"上传附件大小不能超过 "+this.size+"MB!",type:"error"}),a&&s},onUploadSectionFile:function(e){var t=this,a=new FormData;a.append("type",this.type),a.append("file",e.file),i["a"].post(l["a"].server+"/api/fileupload/upload",a).then(function(e){0===e.c?(t.fileWriteList.push(e.d),t.onSuccess(t.fileWriteList),t.$message({showClose:!0,message:"上传成功",type:"success"})):t.$message({showClose:!0,message:"上传失败",type:"error"})})},onPreview:function(e){},onBeforeRemove:function(e){var t=this.fileWriteList.indexOf(e);this.fileWriteList.splice(t,1)}},watch:{param:function(e){e&&(this.fileWriteList=JSON.parse(e),this.onSuccess(this.fileWriteList))}}}),f=p,d=a("2877"),h=Object(d["a"])(f,c,m,!1,null,null,null);h.options.__file="FileUploadItem.vue";var g=h.exports,b=(a("c797"),{name:"useredit",components:{addressitem:n["a"],roleitem:u["a"],fileuploaditem:g},data:function(){var e=function(e,t,a){if(!t&&0!=t)return a(new Error("年龄不能为空"));a()};return{fileSize:30,searchRegions:[],activeName:"first",hackReset:!0,uploadImage:l["a"].uploadImage,allList:[],selectMultiple:[],options:[],ruleForm:{id:"",name:"",account:"",age:0,address:"",createDate:"",status:!0,type:"",radioVal:"",uploadFile:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],age:[{validator:e,trigger:"blur"}],address:[{required:!0,message:"请选择区域",trigger:"change"}],createDate:[{required:!0,message:"请选择日期",trigger:"blur"}],type:[{required:!0,message:"请至少选择一个权限",trigger:"change"}]}}},created:function(){var e=this;i["a"].get(l["a"].server+"/api/bind/getregion").then(function(t){e.options=t.d}),i["a"].get(l["a"].server+"/api/bind/getlist").then(function(t){e.allList=t.d}),this.$route.params.id&&(this.ruleForm.id=this.$route.params.id,i["a"].get(l["a"].server+"/api/user/getmodel",{params:{id:this.ruleForm.id}}).then(function(t){e.ruleForm=t.d}))},methods:{setFileUpload:function(e){this.ruleForm.uploadFile=e},setAddress:function(e){this.ruleForm.address=e},setRole:function(e){this.ruleForm.type=e,this.$refs["ruleForm"].validateField("type")},onSubmitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({showClose:!0,message:"验证未通过",type:"warning"}),!1;t.ruleForm.types=JSON.stringify(t.ruleForm.type),i["a"].post(l["a"].server+"/api/user/operation",t.ruleForm).then(function(e){0===e.c?(o["a"].push({name:"user-List"}),t.$message({showClose:!0,message:"操作成功",type:"success"})):t.$message({showClose:!0,message:"操作失败",type:"error"})})})},setReload:function(){var e=this;this.hackReset=!1,this.$nextTick(function(){return e.hackReset=!0})},onResetForm:function(e){this.setReload(),this.$refs[e].resetFields()},onCancel:function(){o["a"].go(-1)}}}),v=b,y=Object(d["a"])(v,s,r,!1,null,null,null);y.options.__file="Edits.vue";t["default"]=y.exports},c797:function(e,t,a){}}]);
//# sourceMappingURL=chunk-04dcbc63.1df4101e.js.map